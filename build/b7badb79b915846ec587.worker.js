!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=3)}([function(e,t,r){e.exports=r(2)},function(e,t,r){var n,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(e,t){if(!n[e]){n[e]={};for(var r=0;r<e.length;r++)n[e][e.charAt(r)]=r}return n[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var r=i._compress(e,6,(function(e){return t.charAt(e)}));switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(r){return o(t,e.charAt(r))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),r=new Uint8Array(2*t.length),n=0,o=t.length;n<o;n++){var u=t.charCodeAt(n);r[2*n]=u>>>8,r[2*n+1]=u%256}return r},decompressFromUint8Array:function(t){if(null===t||void 0===t)return i.decompress(t);for(var r=new Array(t.length/2),n=0,o=r.length;n<o;n++)r[n]=256*t[2*n]+t[2*n+1];var u=[];return r.forEach((function(t){u.push(e(t))})),i.decompress(u.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return r.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(r,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,r){if(null==e)return"";var n,o,i,u={},s={},c="",a="",l="",f=2,h=3,d=2,p=[],v=0,y=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(u,c)||(u[c]=h++,s[c]=!0),a=l+c,Object.prototype.hasOwnProperty.call(u,a))l=a;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(n=0;n<d;n++)v<<=1,y==t-1?(y=0,p.push(r(v)),v=0):y++;for(o=l.charCodeAt(0),n=0;n<8;n++)v=v<<1|1&o,y==t-1?(y=0,p.push(r(v)),v=0):y++,o>>=1}else{for(o=1,n=0;n<d;n++)v=v<<1|o,y==t-1?(y=0,p.push(r(v)),v=0):y++,o=0;for(o=l.charCodeAt(0),n=0;n<16;n++)v=v<<1|1&o,y==t-1?(y=0,p.push(r(v)),v=0):y++,o>>=1}0==--f&&(f=Math.pow(2,d),d++),delete s[l]}else for(o=u[l],n=0;n<d;n++)v=v<<1|1&o,y==t-1?(y=0,p.push(r(v)),v=0):y++,o>>=1;0==--f&&(f=Math.pow(2,d),d++),u[a]=h++,l=String(c)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(n=0;n<d;n++)v<<=1,y==t-1?(y=0,p.push(r(v)),v=0):y++;for(o=l.charCodeAt(0),n=0;n<8;n++)v=v<<1|1&o,y==t-1?(y=0,p.push(r(v)),v=0):y++,o>>=1}else{for(o=1,n=0;n<d;n++)v=v<<1|o,y==t-1?(y=0,p.push(r(v)),v=0):y++,o=0;for(o=l.charCodeAt(0),n=0;n<16;n++)v=v<<1|1&o,y==t-1?(y=0,p.push(r(v)),v=0):y++,o>>=1}0==--f&&(f=Math.pow(2,d),d++),delete s[l]}else for(o=u[l],n=0;n<d;n++)v=v<<1|1&o,y==t-1?(y=0,p.push(r(v)),v=0):y++,o>>=1;0==--f&&(f=Math.pow(2,d),d++)}for(o=2,n=0;n<d;n++)v=v<<1|1&o,y==t-1?(y=0,p.push(r(v)),v=0):y++,o>>=1;for(;;){if(v<<=1,y==t-1){p.push(r(v));break}y++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,r,n){var o,i,u,s,c,a,l,f=[],h=4,d=4,p=3,v="",y=[],m={val:n(0),position:r,index:1};for(o=0;o<3;o+=1)f[o]=o;for(u=0,c=Math.pow(2,2),a=1;a!=c;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),u|=(s>0?1:0)*a,a<<=1;switch(u){case 0:for(u=0,c=Math.pow(2,8),a=1;a!=c;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),u|=(s>0?1:0)*a,a<<=1;l=e(u);break;case 1:for(u=0,c=Math.pow(2,16),a=1;a!=c;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),u|=(s>0?1:0)*a,a<<=1;l=e(u);break;case 2:return""}for(f[3]=l,i=l,y.push(l);;){if(m.index>t)return"";for(u=0,c=Math.pow(2,p),a=1;a!=c;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),u|=(s>0?1:0)*a,a<<=1;switch(l=u){case 0:for(u=0,c=Math.pow(2,8),a=1;a!=c;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),u|=(s>0?1:0)*a,a<<=1;f[d++]=e(u),l=d-1,h--;break;case 1:for(u=0,c=Math.pow(2,16),a=1;a!=c;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),u|=(s>0?1:0)*a,a<<=1;f[d++]=e(u),l=d-1,h--;break;case 2:return y.join("")}if(0==h&&(h=Math.pow(2,p),p++),f[l])v=f[l];else{if(l!==d)return null;v=i+i.charAt(0)}y.push(v),f[d++]=i+v.charAt(0),i=v,0==--h&&(h=Math.pow(2,p),p++)}}};return i}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),u=new E(n||[]);return i._invoke=function(e,t,r){var n=l;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var u=r.delegate;if(u){var s=A(u,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=a(e,t,r);if("normal"===c.type){if(n=r.done?d:f,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}(e,r,u),i}function a(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=c;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",p={};function v(){}function y(){}function m(){}var g={};g[i]=function(){return this};var F=Object.getPrototypeOf,b=F&&F(F(j([])));b&&b!==r&&n.call(b,i)&&(g=b);var w=m.prototype=v.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function x(e){var t;this._invoke=function(r,o){function i(){return new Promise((function(t,i){!function t(r,o,i,u){var s=a(e[r],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"===typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,i,u)}),(function(e){t("throw",e,i,u)})):Promise.resolve(l).then((function(e){c.value=e,i(c)}),(function(e){return t("throw",e,i,u)}))}u(s.arg)}(r,o,t,i)}))}return t=t?t.then(i,i):i()}}function A(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=a(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var r=e[i];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,u=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return u.next=u}}return{next:C}}function C(){return{value:t,done:!0}}return y.prototype=w.constructor=m,m.constructor=y,m[s]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(x.prototype),x.prototype[u]=function(){return this},e.AsyncIterator=x,e.async=function(t,r,n,o){var i=new x(c(t,r,n,o));return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),w[s]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var u=this.tryEntries[i],s=u.completion;if("root"===u.tryLoc)return o("end");if(u.tryLoc<=this.prev){var c=n.call(u,"catchLoc"),a=n.call(u,"finallyLoc");if(c&&a){if(this.prev<u.catchLoc)return o(u.catchLoc,!0);if(this.prev<u.finallyLoc)return o(u.finallyLoc)}else if(c){if(this.prev<u.catchLoc)return o(u.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return o(u.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=e,u.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n);function i(e,t,r,n,o,i,u){try{var s=e[i](u),c=s.value}catch(a){return void r(a)}s.done?t(c):Promise.resolve(c).then(n,o)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var h=function(){function e(t,r){u(this,e);var n=t._tree,o=Object.keys(n);this.set=t,this.type=r,this.path=o.length>0?[{node:n,keys:o}]:[]}return c(e,[{key:"next",value:function(){var e=this.dive();return this.backtrack(),e}},{key:"dive",value:function(){if(0===this.path.length)return{done:!0};var e=y(this.path),t=e.node,r=e.keys;return y(r)===v?{done:!1,value:this.result()}:(this.path.push({node:t[y(r)],keys:Object.keys(t[y(r)])}),this.dive())}},{key:"backtrack",value:function(){0!==this.path.length&&(y(this.path).keys.pop(),y(this.path).keys.length>0||(this.path.pop(),this.backtrack()))}},{key:"key",value:function(){return this.set._prefix+this.path.map((function(e){var t=e.keys;return y(t)})).filter((function(e){return e!==v})).join("")}},{key:"value",value:function(){return y(this.path).node[v]}},{key:"result",value:function(){return this.type===p?this.value():this.type===d?this.key():[this.key(),this.value()]}},{key:Symbol.iterator,value:function(){return this}}]),e}(),d="KEYS",p="VALUES",v="",y=function(e){return e[e.length-1]},m=function(e,t,r,n,o,i){i.push({distance:0,ia:n,ib:0,edit:o});for(var u=[];i.length>0;){var s=i.pop(),c=s.distance,a=s.ia,l=s.ib,f=s.edit;if(l!==t.length)if(e[a]===t[l])i.push({distance:c,ia:a+1,ib:l+1,edit:g});else{if(c>=r)continue;f!==b&&i.push({distance:c+1,ia:a,ib:l+1,edit:w}),a<e.length&&(f!==w&&i.push({distance:c+1,ia:a+1,ib:l,edit:b}),f!==w&&f!==b&&i.push({distance:c+1,ia:a+1,ib:l+1,edit:F}))}else u.push({distance:c,i:a,edit:f})}return u},g=0,F=1,b=2,w=3,_=function(e,t,r){for(var n=[{distance:0,i:0,key:"",node:e}],o={},i=[],u=function(){var e=n.pop(),u=e.node,s=e.distance,c=e.key,a=e.i,l=e.edit;Object.keys(u).forEach((function(e){if(e===v){var h=s+(t.length-a),d=f(o[c]||[null,1/0],2)[1];h<=r&&h<d&&(o[c]=[u[e],h])}else m(t,e,r-s,a,l,i).forEach((function(t){var r=t.distance,o=t.i,i=t.edit;n.push({node:u[e],distance:s+r,key:c+e,i:o,edit:i})}))}))};n.length>0;)u();return o},x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";u(this,e),this._tree=t,this._prefix=r}return c(e,[{key:"atPrefix",value:function(t){if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");var r=f(O(this._tree,t.slice(this._prefix.length)),2),n=r[0],o=r[1];if(void 0===n){var i=f(L(o),2),u=i[0],s=i[1],c=Object.keys(u).find((function(e){return e!==v&&e.startsWith(s)}));if(void 0!==c)return new e(a({},c.slice(s.length),u[c]),t)}return new e(n||{},t)}},{key:"clear",value:function(){delete this._size,this._tree={}}},{key:"delete",value:function(e){return delete this._size,C(this._tree,e)}},{key:"entries",value:function(){return new h(this,"ENTRIES")}},{key:"forEach",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,i=this[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=f(o.value,2);e(u[0],u[1],this)}}catch(s){r=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}},{key:"fuzzyGet",value:function(e,t){return _(this._tree,e,t)}},{key:"get",value:function(e){var t=k(this._tree,e);return void 0!==t?t[v]:void 0}},{key:"has",value:function(e){var t=k(this._tree,e);return void 0!==t&&t.hasOwnProperty(v)}},{key:"keys",value:function(){return new h(this,d)}},{key:"set",value:function(e,t){if("string"!==typeof e)throw new Error("key must be a string");return delete this._size,E(this._tree,e)[v]=t,this}},{key:"update",value:function(e,t){if("string"!==typeof e)throw new Error("key must be a string");delete this._size;var r=E(this._tree,e);return r[v]=t(r[v]),this}},{key:"values",value:function(){return new h(this,p)}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"size",get:function(){var e=this;return this._size?this._size:(this._size=0,this.forEach((function(){e._size+=1})),this._size)}}]),e}();x.from=function(e){var t=new x,r=!0,n=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var s=f(i.value,2),c=s[0],a=s[1];t.set(c,a)}}catch(l){n=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(n)throw o}}return t},x.fromObject=function(e){return x.from(Object.entries(e))};var A,O=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===r.length)return[t,n];var o=Object.keys(t).find((function(e){return e!==v&&r.startsWith(e)}));return void 0===o?e(void 0,"",[].concat(l(n),[[t,r]])):e(t[o],r.slice(o.length),[].concat(l(n),[[t,o]]))},k=function e(t,r){if(0===r.length)return t;var n=Object.keys(t).find((function(e){return e!==v&&r.startsWith(e)}));return void 0!==n?e(t[n],r.slice(n.length)):void 0},E=function e(t,r){if(0===r.length)return t;var n=Object.keys(t).find((function(e){return e!==v&&r.startsWith(e)}));if(void 0===n){var o=Object.keys(t).find((function(e){return e!==v&&e.startsWith(r[0])}));if(void 0!==o){var i=j(r,o);return t[i]=a({},o.slice(i.length),t[o]),delete t[o],e(t[i],r.slice(i.length))}return t[r]={},t[r]}return e(t[n],r.slice(n.length))},j=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.min(t.length,r.length),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return n>=o?i:t[n]!==r[n]?i:e(t,r,n+1,o,i+t[n])},C=function(e,t){var r=f(O(e,t),2),n=r[0],o=r[1];if(void 0!==n){delete n[v];var i=Object.keys(n);0===i.length&&I(o),1===i.length&&D(o,i[0],n[i[0]])}},I=function e(t){if(0!==t.length){var r=f(L(t),2),n=r[0];delete n[r[1]],0===Object.keys(n).length&&e(t.slice(0,-1))}},D=function(e,t,r){if(0!==e.length){var n=f(L(e),2),o=n[0],i=n[1];o[i+t]=r,delete o[i]}},L=function(e){return e[e.length-1]},S=x;function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M="or",B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this._options=P({},H,{},t),this._options.searchOptions=P({},X,{},this._options.searchOptions||{});var r=this._options.fields;if(null==r)throw new Error('MiniSearch: option "fields" must be provided');this._index=new S,this._documentCount=0,this._documentIds={},this._fieldIds={},this._fieldLength={},this._averageFieldLength={},this._nextId=0,this._storedFields={},G(this,r)}return c(e,[{key:"add",value:function(e){var t=this,r=this._options,n=r.extractField,o=r.tokenize,i=r.processTerm,u=r.fields,s=r.idField;if(null==e[s])throw new Error('MiniSearch: document does not have ID field "'.concat(s,'"'));var c=U(this,e[s]);Y(this,c,e),u.forEach((function(r){var u=o(n(e,r)||"",r);W(t,c,t._fieldIds[r],t.documentCount-1,u.length),u.forEach((function(e){var n=i(e,r);Z(n)&&T(t,t._fieldIds[r],c,n)}))}))}},{key:"addAll",value:function(e){var t=this;e.forEach((function(e){return t.add(e)}))}},{key:"addAllAsync",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.chunkSize,o=void 0===n?10:n,i={chunk:[],promise:Promise.resolve(null)},u=e.reduce((function(e,r,n){var i=e.chunk,u=e.promise;return i.push(r),(n+1)%o===0?{chunk:[],promise:u.then((function(){return t.addAll(i)}))}:{chunk:i,promise:u}}),i),s=u.chunk,c=u.promise;return c.then((function(){return t.addAll(s)}))}},{key:"remove",value:function(e){var t=this,r=this._options,n=r.tokenize,o=r.processTerm,i=r.fields,u=r.idField;if(null==e[u])throw new Error('MiniSearch: document does not have ID field "'.concat(u,'"'));var s=Object.entries(this._documentIds).find((function(t){var r=f(t,2),n=(r[0],r[1]);return e[u]===n}))||[],c=f(s,1)[0];if(null==c)throw new Error("MiniSearch: cannot remove document with ID ".concat(e[u],": it is not in the index"));i.filter((function(t){return null!=e[t]})).forEach((function(r){n(e[r]).forEach((function(e){var n=o(e);Z(n)&&N(t,t._fieldIds[r],c,o(e))}))})),delete this._storedFields[c],delete this._documentIds[c],this._documentCount-=1}},{key:"search",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._options,o=n.tokenize,i=n.processTerm,u=n.searchOptions,s=r=P({tokenize:o,processTerm:i},u,{},r),c=s.tokenize,a=s.processTerm,l=c(e).map((function(e){return a(e)})).filter(Z).map(K(r)),h=l.map((function(e){return t.executeQuery(e,r)})),d=this.combineResults(h,r.combineWith);return Object.entries(d).reduce((function(e,n){var o=f(n,2),i=o[0],u=o[1],s=u.score,c=u.match,a=u.terms,l={id:t._documentIds[i],terms:V(a),score:s,match:c};return Object.assign(l,t._storedFields[i]),(null==r.filter||r.filter(l))&&e.push(l),e}),[]).sort((function(e,t){return e.score<t.score?1:-1}))}},{key:"autoSuggest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=P({},$,{},t);var r=this.search(e,t).reduce((function(e,t){var r=t.score,n=t.terms,o=n.join(" ");return null==e[o]?e[o]={score:r,terms:n,count:1}:(e[o].score+=r,e[o].count+=1),e}),{});return Object.entries(r).map((function(e){var t=f(e,2),r=t[0],n=t[1],o=n.score;return{suggestion:r,terms:n.terms,score:o/n.count}})).sort((function(e,t){return e.score<t.score?1:-1}))}},{key:"executeQuery",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((r=P({},this._options.searchOptions,{},r)).fields||this._options.fields).reduce((function(e,t){return P({},e,a({},t,e[t]||1))}),r.boost||{}),o=r,i=o.boostDocument,u=o.weights,s=u.fuzzy,c=void 0===s?.9:s,l=u.prefix,h=void 0===l?.75:l,d=J(this,e.term,n,i,this._index.get(e.term));if(!e.fuzzy&&!e.prefix)return d;var p=[d];if(e.prefix&&this._index.atPrefix(e.term).forEach((function(r,o){var u=.3*(r.length-e.term.length)/r.length;p.push(J(t,r,n,i,o,h,u))})),e.fuzzy){var v=e.fuzzy<1?Math.round(e.term.length*e.fuzzy):e.fuzzy;Object.entries(this._index.fuzzyGet(e.term,v)).forEach((function(e){var r=f(e,2),o=r[0],u=f(r[1],2),s=u[0],a=u[1]/o.length;p.push(J(t,o,n,i,s,c,a))}))}return p.reduce(Q.or,{})}},{key:"combineResults",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;if(0===e.length)return{};var r=t.toLowerCase();return e.reduce(Q[r],null)}},{key:"toJSON",value:function(){return{index:this._index,documentCount:this._documentCount,nextId:this._nextId,documentIds:this._documentIds,fieldIds:this._fieldIds,fieldLength:this._fieldLength,averageFieldLength:this._averageFieldLength,storedFields:this._storedFields}}},{key:"documentCount",get:function(){return this._documentCount}}],[{key:"loadJSON",value:function(t,r){if(null==r)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return e.loadJS(JSON.parse(t),r)}},{key:"getDefault",value:function(e){if(Object.keys(H).includes(e))return H[e];throw new Error('MiniSearch: unknown option "'.concat(e,'"'))}},{key:"loadJS",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,o=n._tree,i=n._prefix,u=t.documentCount,s=t.nextId,c=t.documentIds,a=t.fieldIds,l=t.fieldLength,f=t.averageFieldLength,h=t.storedFields,d=new e(r);return d._index=new S(o,i),d._documentCount=u,d._nextId=s,d._documentIds=c,d._fieldIds=a,d._fieldLength=l,d._averageFieldLength=f,d._fieldIds=a,d._storedFields=h||{},d}}]),e}();B.SearchableMap=S;var T=function(e,t,r,n){e._index.update(n,(function(e){var n=(e=e||{})[t]||{df:0,ds:{}};return null==n.ds[r]&&(n.df+=1),n.ds[r]=(n.ds[r]||0)+1,P({},e,a({},t,n))}))},N=function(e,t,r,n){e._index.has(n)?(e._index.update(n,(function(o){var i=o[t];if(null==i||null==i.ds[r])return R(e,r,t,n),o;if(i.ds[r]<=1){if(i.df<=1)return delete o[t],o;i.df-=1}return i.ds[r]<=1?(delete i.ds[r],o):(i.ds[r]-=1,P({},o,a({},t,i)))})),0===Object.keys(e._index.get(n)).length&&e._index.delete(n)):R(e,r,t,n)},R=function(e,t,r,n){if(null!=console&&null!=console.warn){var o=Object.entries(e._fieldIds).find((function(e){var t=f(e,2);t[0];return t[1]===r}))[0];console.warn("MiniSearch: document with ID ".concat(e._documentIds[t],' has changed before removal: term "').concat(n,'" was not present in field "').concat(o,'". Removing a document after it has changed can corrupt the index!'))}},U=function(e,t){var r=e._nextId.toString(36);return e._documentIds[r]=t,e._documentCount+=1,e._nextId+=1,r},G=function(e,t){t.forEach((function(t,r){e._fieldIds[t]=r}))},J=function(e,t,r,n,o){arguments.length>5&&void 0!==arguments[5]&&arguments[5];var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return null==o?{}:Object.entries(r).reduce((function(r,u){var s=f(u,2),c=s[0],a=s[1],l=e._fieldIds[c],h=o[l]||{ds:{}},d=h.df,p=h.ds;return Object.entries(p).forEach((function(o){var u=f(o,2),s=u[0],h=u[1],p=n?n(e._documentIds[s],t):1;if(p){var v=e._fieldLength[s][l]/e._averageFieldLength[l];r[s]=r[s]||{score:0,match:{},terms:[]},r[s].terms.push(t),r[s].match[t]=r[s].match[t]||[],r[s].score+=p*q(h,d,e._documentCount,v,a,i),r[s].match[t].push(c)}})),r}),{})},W=function(e,t,r,n,o){e._averageFieldLength[r]=e._averageFieldLength[r]||0;var i=e._averageFieldLength[r]*n+o;e._fieldLength[t]=e._fieldLength[t]||{},e._fieldLength[t][r]=o,e._averageFieldLength[r]=i/(n+1)},Y=function(e,t,r){var n=e._options,o=n.storeFields,i=n.extractField;null!=o&&0!==o.length&&(e._storedFields[t]=e._storedFields[t]||{},o.forEach((function(n){var o=i(r,n);void 0!==o&&(e._storedFields[t][n]=o)})))},Q=(a(A={},M,(function(e,t){return Object.entries(t).reduce((function(e,t){var r=f(t,2),n=r[0],o=r[1],i=o.score,u=o.match,s=o.terms;return null==e[n]?e[n]={score:i,match:u,terms:s}:(e[n].score+=i,e[n].score*=1.5,e[n].terms=[].concat(l(e[n].terms),l(s)),Object.assign(e[n].match,u)),e}),e||{})})),a(A,"and",(function(e,t){return null==e?t:Object.entries(t).reduce((function(t,r){var n=f(r,2),o=n[0],i=n[1],u=i.score,s=i.match,c=i.terms;return void 0===e[o]?t:(t[o]=t[o]||{},t[o].score=e[o].score+u,t[o].match=P({},e[o].match,{},s),t[o].terms=[].concat(l(e[o].terms),l(c)),t)}),{})})),A),q=function(e,t,r,n,o,i){var u,s;return o/(1+.333*o*i)*(u=t,s=r,e*Math.log(s/u))/n},K=function(e){return function(t,r,n){return{term:t,fuzzy:"function"===typeof e.fuzzy?e.fuzzy(t,r,n):e.fuzzy,prefix:"function"===typeof e.prefix?e.prefix(t,r,n):e.prefix}}},V=function(e){return e.filter((function(e,t,r){return r.indexOf(e)===t}))},Z=function(e){return!!e},H={idField:"id",extractField:function(e,t){return e[t]},tokenize:function(e,t){return e.split(ee)},processTerm:function(e,t){return e.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},X={combineWith:M,prefix:!1,fuzzy:!1,weights:{}},$={prefix:function(e,t,r){return t===r.length-1}},ee=/[\n\r -#%-\*,-\/:;\?@\[-\]_\{\}\xA0\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/,te=B,re=r(1),ne=r.n(re),oe=function(e){if(!e||""===e)return e;for(var t="",r=0;r<e.length&&e[r].toUpperCase()>="A"&&e[r].toUpperCase()<="Z";)t+=e[r].toUpperCase(),r++;return[t,e.slice(r)].join(" ").toUpperCase()};function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(r,!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se={fuzzy:0,prefix:!0},ce={searchOptions:ue({},se,{boost:{code:100}}),fields:["code","name","profs"],storeFields:["code","name","profs"]},ae={searchOptions:ue({},se,{boost:{name:100}}),fields:["name","courses"],storeFields:["code","name","courses"]},le={searchOptions:se,fields:["code"],storeFields:["code"]};const fe=new(function(){function e(){u(this,e),this.built=!1,this.courseIndex=new te(ce),this.profIndex=new te(ae),this.courseCodeIndex=new te(le)}return c(e,[{key:"autocomplete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(1===e.length)return{courseResults:[],profResults:[],courseCodeResults:[]};e.length>50&&(e=e.slice(0,50));var t=e.split(" ").map((function(e){return oe(e)})).join(" "),r=this.courseIndex.search(t).slice(0,4),n=this.profIndex.search(t).slice(0,2),o=this.courseCodeIndex.search(t).slice(0,2);return{courseResults:r,profResults:n,courseCodeResults:o}}},{key:"buildIndices",value:function(){var e,t=(e=o.a.mark((function e(t){var r,n,i,u,s,c,a,l,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new te(ce),i=new te(ae),u=new te(le),null!==t){e.next=12;break}return e.next=6,fetch("".concat(null).concat("/data/search"));case 6:return s=e.sent,e.next=9,s.json();case 9:r=e.sent,e.next=13;break;case 12:r=JSON.parse(ne.a.decompressFromUTF16(t));case 13:return c=new Set([]),a=r.courses.map((function(e){var t=oe(e.code).split(" ")[0];return c.add(t),ue({},e,{code:oe(e.code),profs:null===e.profs?"":e.profs.join(" ")})})),l=r.profs.map((function(e){return ue({},e,{courses:null===e.courses?"":e.courses.map((function(e){return oe(e)})).join(" ")})})),f=Array.from(c).map((function(e,t){return Object({id:t,code:e})})),n.addAll(a),i.addAll(l),u.addAll(f),this.courseIndex=n,this.profIndex=i,this.courseCodeIndex=u,this.built=!0,e.abrupt("return",ne.a.compressToUTF16(JSON.stringify(r)));case 25:case"end":return e.stop()}}),e,this)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var u=e.apply(t,r);function s(e){i(u,n,o,s,c,"next",e)}function c(e){i(u,n,o,s,c,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}()}]),e}());self.onmessage=async e=>{const{type:t}=e.data;switch(t){case"autocomplete":const t=e.data.query,r=fe.autocomplete(t);postMessage({type:"autocomplete",results:r});break;case"build":const n=await fe.buildIndices(e.data.searchData);postMessage({type:"data",searchData:n})}}}]);
//# sourceMappingURL=b7badb79b915846ec587.worker.js.map